<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Grades / Marks Page</title>

<style>
    body {
        margin: 0;
        font-family: "Segoe UI", Arial, sans-serif;
        background: linear-gradient(135deg, #6a11cb, #2575fc);
        background-attachment: fixed;
        padding: 30px 0;
    }

    .container {
        width: 90%;
        max-width: 900px;
        background: rgba(255,255,255,0.95);
        padding: 30px;
        margin: auto;
        border-radius: 18px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        backdrop-filter: blur(10px);
        animation: fadeIn 0.7s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    h2 {
        text-align: center;
        margin-bottom: 25px;
        color: #222;
        font-size: 26px;
        letter-spacing: 1px;
    }

    label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
        color: #333;
    }

    input {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #aaa;
        margin-bottom: 15px;
        font-size: 15px;
    }

    .row {
        display: flex;
        gap: 20px;
    }

    .row > div {
        flex: 1;
    }

    button {
        padding: 12px 20px;
        border: none;
        border-radius: 10px;
        font-size: 15px;
        cursor: pointer;
        color: white;
        transition: 0.25s ease;
    }

    button:hover {
        transform: scale(1.06);
        opacity: 0.9;
    }

    .blue { background: #007bff; }
    .green { background: #28a745; }
    .red { background: #dc3545; }
    .gray { background: #6c757d; }
    .purple { background: #6f42c1; }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }

    th {
        background: #444;
        color: white;
        padding: 12px;
    }

    td {
        padding: 10px;
        background: white;
        border-bottom: 1px solid #ccc;
    }

    #filterBox {
        display: none;
        background: white;
        border-radius: 12px;
        width: 320px;
        padding: 20px;
        position: fixed;
        top: 25%;
        left: 40%;
        box-shadow: 0 15px 40px rgba(0,0,0,0.35);
        animation: pop 0.4s ease;
    }

    @keyframes pop {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }

</style>
</head>
<body>

<div class="container">

<h2>Grades / Marks Page</h2>

<div class="row">
<div>
<label>Student Name:</label>
<input id="name">
</div>

<div>
<label>Student ID:</label>
<input id="id">
</div>
</div>

<div class="row">
<div>
<label>Class:</label>
<input id="class">
</div>

<div>
<label>DOB:</label>
<input type="date" id="dob">
</div>
</div>

<div class="row">
<div>
<label>Subject:</label>
<input id="subject">
</div>

<div>
<label>Grade:</label>
<input id="grade">
</div>
</div>

<button class="blue" onclick="addRecord()">Add Grade</button>
<button class="gray" onclick="clearInputs()">Clear</button>
<button class="green" onclick="updateRecord()">Update</button>
<button class="red" onclick="deleteRecord()">Delete</button>
<br><br>

<input id="searchBox" placeholder="Search by student name" style="width:70%; padding:10px; border-radius:8px;">
<button class="purple" onclick="searchName()">Search</button>

<button class="blue" onclick="showAll()">Show All</button>
<button class="gray" onclick="openFilter()">Filter</button>
<button class="green" onclick="window.print()">Print</button>

<table id="table">
<thead>
<tr>
<th>Student ID</th>
<th>Name</th>
<th>Class</th>
<th>DOB</th>
<th>Subject</th>
<th>Grade</th>
</tr>
</thead>
<tbody></tbody>
</table>

<p id="stats"></p>

</div>

<!-- FILTER POPUP -->
<div id="filterBox">
<h3>Filter Options</h3>

<label>Show Grade:</label>
<select id="filterGrade" style="width:100%; padding:8px;">
    <option value="">-- Select --</option>
    <option>A</option>
    <option>B</option>
    <option>C</option>
    <option>D</option>
</select>

<br><br>
<button class="green" onclick="applyFilter()">Apply</button>
<button class="red" onclick="closeFilter()">Close</button>
</div>

<script>
let data = [
    {id:"001", name:"John", class:"10A", dob:"2008-05-10", subject:"Math", grade:"A"},
    {id:"002", name:"Mary", class:"10B", dob:"2008-09-20", subject:"Science", grade:"B+"}
];

let selectedIndex = -1;
loadTable();

function loadTable(list = data) {
    let tbody = document.querySelector("#table tbody");
    tbody.innerHTML = "";
    list.forEach((d, i) => {
        let row = `<tr onclick="selectRow(${i})">
            <td>${d.id}</td>
            <td>${d.name}</td>
            <td>${d.class}</td>
            <td>${d.dob}</td>
            <td>${d.subject}</td>
            <td>${d.grade}</td>
        </tr>`;
        tbody.innerHTML += row;
    });

    let grades = list.map(a => a.grade.charAt(0));
    let avg = grades.reduce((a,b)=>a+b.charCodeAt(0),0)/grades.length;
    let highest = grades.sort()[0];
    let lowest = grades.sort()[grades.length-1];

    document.getElementById("stats").innerHTML =
        `Average Grade: ${String.fromCharCode(Math.round(avg))} 
         | Highest: ${highest} 
         | Lowest: ${lowest}`;
}

function addRecord() {
    let obj = {
        id: id.value,
        name: name.value,
        class: class.value,
        dob: dob.value,
        subject: subject.value,
        grade: grade.value
    };
    data.push(obj);
    loadTable();
    clearInputs();
}

function clearInputs() {
    id.value = name.value = class.value = dob.value = subject.value = grade.value = "";
    selectedIndex = -1;
}

function selectRow(i) {
    selectedIndex = i;
    let d = data[i];
    id.value = d.id;
    name.value = d.name;
    class.value = d.class;
    dob.value = d.dob;
    subject.value = d.subject;
    grade.value = d.grade;
}

function updateRecord() {
    if (selectedIndex < 0) return;
    data[selectedIndex] = {
        id: id.value,
        name: name.value,
        class: class.value,
        dob: dob.value,
        subject: subject.value,
        grade: grade.value
    };
    loadTable();
}

function deleteRecord() {
    if (selectedIndex < 0) return;
    data.splice(selectedIndex, 1);
    loadTable();
    clearInputs();
}

function searchName() {
    let s = searchBox.value.toLowerCase();
    let filtered = data.filter(d => d.name.toLowerCase().includes(s));
    loadTable(filtered);
}

function showAll() {
    loadTable(data);
}

function openFilter() {
    filterBox.style.display = "block";
}

function closeFilter() {
    filterBox.style.display = "none";
}

function applyFilter() {
    let g = filterGrade.value;
    let filtered = data.filter(d => d.grade.startsWith(g));
    loadTable(filtered);
    closeFilter();
}
</script>

</body>
</html>
